SouthRidge.Views.AlbumView=Backbone.View.extend({el:"#content",collection:null,icon:null,initialize:function(a){_.bindAll(this,"render");this.collection=a.collection;this.icon=a.icon;this.render()},render:function(){SouthRidge.Utils.ScrollTop();for(var a={albums:this.collection.models},c=0;c<this.collection.models.length;c++){var b=this.collection.models[c];void 0==b.get("name")&&b.set("name","Untitled Album");void 0==b.get("description")&&b.set("description","");b.set("icon",this.icon)}c=_.template($("#albums").html(),
a);SouthRidge.Utils.SetTopBar("Photos");forge.topbar.addButton({icon:"img/167-upload-photo@2x.png",position:"left",tint:SouthRidge.Utils.ActiveTint},function(){try{forge.file.getImage({width:500,height:500},function(a){SouthRidge.Utils.Uploader.ImageFile(a)})}catch(a){SouthRidge.Utils.Alert("Error","Unable to access camera or photo gallery at this time.")}});SouthRidge.Utils.DoneLoading();$(this.el).unbind().html(c).show();for(c=0;c<this.collection.models.length;c++)b=this.collection.models[c],void 0==
SouthRidge.Cache.CoverPhotos[b.get("cover_photo")]?void 0!=b.get("cover_photo")&&forge.request.get("http://graph.facebook.com/"+b.get("cover_photo"),function(a){SouthRidge.Cache.CoverPhotos[a.id]=a.picture;$("#"+a.id).attr("style","background-image: url("+SouthRidge.Cache.CoverPhotos[a.id]+")")}):(a=b.get("cover_photo"),$("#"+a).attr("style","background-image: url("+SouthRidge.Cache.CoverPhotos[a]+")"))},events:{"tap div.album":"handleTap"},handleTap:function(a){a.preventDefault();a=this.collection.where({cover_photo:$(a.target).attr("id")});
1===a.length&&SouthRidge.Router.navigate("photos/"+a[0].get("id"),{trigger:!0})}});
SouthRidge.Views.PhotosView=Backbone.View.extend({el:"#content",collection:null,albumId:"",initialize:function(a){_.bindAll(this,"render");this.collection=a.collection;this.albumId=a.albumId;this.render()},render:function(){SouthRidge.Utils.ScrollTop();forge.tabbar.setInactive(function(){},function(){});for(var a=SouthRidge.Cache.Albums,c="",b="",f=[],e=0;e<a.models.length;e++){var d=a.models[e];if(d.get("id")==this.albumId){c=void 0==d.get("name")?"Untitled Album":d.get("name");b=void 0==d.get("description")?
"":d.get("description");void 0!=d.get("likes")&&void 0!=d.get("likes").data&&(f=d.get("likes").data);break}}a={albumName:c,albumDesc:b,photos:this.collection.models,likes:f};a=_.template($("#photos").html(),a);SouthRidge.Utils.SetTopBar("");forge.topbar.addButton({text:"Back",position:"left",tint:SouthRidge.Utils.MainColor},function(){SouthRidge.Router.navigate("albums",{trigger:!0})});SouthRidge.Utils.DoneLoading();$(this.el).unbind().html(a).show()},events:{"tap div.photo":"handleTap"},handleTap:function(a){a.preventDefault();
a=this.collection.where({id:$(a.target).attr("id")});1===a.length&&(a=a[0].get("source"),forge.tabs.openWithOptions({url:a,tint:SouthRidge.Utils.MainColor},function(a){SouthRidge.Utils.Log(a.url)}))}});
